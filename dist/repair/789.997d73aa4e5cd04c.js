"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[789],{6789:(O,l,r)=>{r.r(l),r.d(l,{BrandModule:()=>z});var g=r(6814),d=r(132),u=r(8180),f=r(9397),c=r(3839),v=r(9947),a=r(9212),m=r(3530),b=r(537),y=r(4830),p=r(6925);const B=()=>({width:"70%",padding:"0px"}),S=()=>({"background-color":"#f9f9f9"});let D=(()=>{class i{constructor(e,t){this.brandService=e,this.router=t,this.loading=!1,this.dataRows=[],this.showDetail=!1,this.rowDetail={},this.publicHost=v.N.publicHost,this.brandMapping={id:s=>s.id,name:s=>s.name,description:s=>s.description,email:s=>s.email,active:s=>s.active,image:s=>this.publicHost.concat("/images/").concat(s.imageUrl)}}ngOnInit(){this.brandService.getAllBrands().pipe((0,u.q)(1),(0,f.b)(e=>{this.dataRows=e})).subscribe()}onEvent(e,t){"Add"==e?this.router.navigate(["/brands/add"]):e.eventType&&"edit"===e.eventType?(delete e.eventType,console.log(e),this.router.navigate(["/brands/edit",{formData:JSON.stringify(e)}])):e.eventType&&"delete"===e.eventType?(delete e.eventType,this.delete(e)):e.eventType&&"show"===e.eventType&&(delete e.eventType,this.showDetail=!0,this.rowDetail=e)}delete(e){this.brandService.deleteBrand(e.id).subscribe({next:t=>{let s=this.dataRows.findIndex(n=>n.id==e.id);if(-1!==s){let n=this.dataRows.splice(s,1);this.dataRows=this.dataRows.filter(o=>o.id!==n[0].id)}},error:t=>{console.error("Error adding brand:",t)}})}static{this.\u0275fac=function(t){return new(t||i)(a.Y36(c.c),a.Y36(d.F0))}}static{this.\u0275cmp=a.Xpm({type:i,selectors:[["app-brand"]],decls:8,vars:18,consts:[[3,"visibleChange","modal","header","draggable","visible","contentStyle","styleClass","closeOnEscape","dismissableMask","resizable"],[1,"col-12"],["name","brand",1,"detail",3,"dataRow"],[1,"grid"],[1,"card"],["name","brand",3,"event","dataRows","mapping"]],template:function(t,s){1&t&&(a.TgZ(0,"p-dialog",0),a.ALo(1,"translate"),a.Uc_("visibleChange",function(o){return a.nJJ(s.showDetail,o)||(s.showDetail=o),o}),a.TgZ(2,"div",1),a._UZ(3,"generator-detail",2),a.qZA()(),a.TgZ(4,"div",3)(5,"div",1)(6,"div",4)(7,"generator-table",5),a.NdJ("event",function(o){return s.onEvent(o)}),a.qZA()()()()),2&t&&(a.Akn(a.DdM(16,B)),a.Q6J("modal",!0)("header",a.lcZ(1,14,"brand.detail"))("draggable",!0),a.E3D("visible",s.showDetail),a.Q6J("contentStyle",a.DdM(17,S))("styleClass","custom-dialog")("closeOnEscape",!0)("dismissableMask",!0)("resizable",!0),a.xp6(3),a.Q6J("dataRow",s.rowDetail),a.xp6(4),a.Q6J("dataRows",s.dataRows)("mapping",s.brandMapping))},dependencies:[m.V,b.j,y.u,p.X$],encapsulation:2})}}return i})();var M=r(5861),T=r(6463),w=r(7635),R=r(5219),C=r(9567),J=r(3282);let h=(()=>{class i{constructor(e,t,s,n,o){this.brandService=e,this.messageService=t,this.route=s,this.fileService=n,this.toast=o,this.formData={},this.editMode=!1,this.computed=Y=>{},this.isUploading=!1,this.model=new T.q,this.services=[{}]}ngOnInit(){this.route.snapshot.paramMap.get("formData")&&(this.formData=JSON.parse(this.route.snapshot.paramMap.get("formData")??"{}"),this.editMode=!0)}addBrand(e){var t=this;return(0,M.Z)(function*(){if(!e)return void t.show("Error","Please provide all required fields for EquipmentDetail !","error");const s={id:t.editMode?e.id:t.generateRandom().toString(),name:e.name,description:e.description,email:e.email,active:e.active,imageUrl:e.image?URL.createObjectURL(e.image):""},n=e.image;t.editMode?t.brandService.updateBrand(e.id,s).subscribe({next:o=>{t.fileService.uploadImage(n,o.imageUrl,"brands"),t.toast.showSuccess("Brand was updated successfully!")},error:o=>{console.error(o),t.toast.showError("Failed to update Brand. Please try again.")}}):t.brandService.addBrand(s).subscribe({next:o=>{t.fileService.uploadImage(n,o.imageUrl,"brands"),t.toast.showSuccess("Brand was added successfully!")},error:o=>{console.error(o),t.toast.showError("Failed to add Brand. Please try again.")}})})()}show(e,t,s){this.messageService.add({severity:s,summary:e,detail:t})}generateRandom(){const e=Math.random()*(new Date).getMilliseconds();return console.log(e),Math.floor(e%1e5)}static{this.\u0275fac=function(t){return new(t||i)(a.Y36(c.c),a.Y36(R.ez),a.Y36(d.gz),a.Y36(w.I),a.Y36(C.k))}}static{this.\u0275cmp=a.Xpm({type:i,selectors:[["app-add-brand"]],decls:2,vars:3,consts:[[1,"col-12"],["title","brand",3,"sub","formData","model","isModal"]],template:function(t,s){1&t&&(a.TgZ(0,"div",0)(1,"generator-form",1),a.NdJ("sub",function(o){return s.addBrand(o)}),a.qZA()()),2&t&&(a.xp6(),a.Q6J("formData",s.formData)("model",s.model)("isModal",!1))},dependencies:[J.x],encapsulation:2})}}return i})();const A=[{path:"",component:D},{path:"add",data:{breadcrumb:"brand.add"},component:h},{path:"edit",data:{breadcrumb:"brand.edit"},component:h}];let E=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=a.oAB({type:i})}static{this.\u0275inj=a.cJS({imports:[d.Bz.forChild(A),d.Bz]})}}return i})();var Z=r(4956),I=r(4862),U=r(4104),F=r(7830);let z=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=a.oAB({type:i})}static{this.\u0275inj=a.cJS({imports:[g.ez,E,m.S,Z.S,I.X,U.EV,F.d,p.aw]})}}return i})()}}]);