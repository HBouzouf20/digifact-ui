"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[655],{4655:(x,m,a)=>{a.r(m),a.d(m,{DashboardEcommerceModule:()=>Y});var c=a(6814),g=a(132),f=a(5993),v=a(450),d=a(3839),u=a(3601),l=a(5836),e=a(9212),y=a(3859),Z=a(6925),O=a(707),C=a(5219),T=a(4480),w=a(1122),P=a(9252),_=a(8746),A=a(3714);const I=["chatcontainer"],k=()=>["name","category","inventoryStatus"],U=n=>({width:n});function D(n,s){if(1&n&&e._UZ(0,"li",43),2&n){const t=s.$implicit,o=s.index,i=e.oxw();e.Q6J("ngClass",i.colorClasses[o])("ngStyle",e.VKq(2,U,t.quantity/i.totalSold*100+"%"))}}function E(n,s){if(1&n&&(e.TgZ(0,"li",44),e._UZ(1,"span",45),e.TgZ(2,"span",46),e._uU(3),e.qZA(),e.TgZ(4,"span",47),e._uU(5),e.qZA()()),2&n){const t=s.$implicit,o=s.index,i=e.oxw();e.xp6(),e.Q6J("ngClass",i.colorClasses[o]),e.xp6(2),e.Oqu(t.equipment.title),e.xp6(2),e.Oqu(t.quantity)}}function L(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",48),e._uU(2,"Name "),e._UZ(3,"p-sortIcon",49),e.qZA(),e.TgZ(4,"th",50),e._uU(5,"Category "),e._UZ(6,"p-sortIcon",51),e.qZA(),e.TgZ(7,"th",52),e._uU(8,"Brand "),e._UZ(9,"p-sortIcon",53),e.qZA(),e.TgZ(10,"th",54),e._uU(11,"Price "),e._UZ(12,"p-sortIcon",55),e.qZA(),e._UZ(13,"th"),e.qZA())}function q(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span",56),e._uU(5,"Category"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span",56),e._uU(9,"Brand"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"span",56),e._uU(13,"Price"),e.qZA(),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"td",57),e._UZ(17,"button",58),e.qZA()()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(4),e.hij(" ",t.category.name," "),e.xp6(4),e.hij(" ",t.brand.name," "),e.xp6(4),e.hij(" ",e.xi3(15,4,t.price,"MAD")," ")}}let M=(()=>{class n{constructor(t,o,i,r,h,p,b){this.productService=t,this.layoutService=o,this.translate=i,this.categoryService=r,this.brandService=h,this.orderService=p,this.clientService=b,this.products=[],this.categories=[],this.brands=[],this.orders=[],this.clients=[],this.topProducts=[],this.cols=[],this.outOfStock=[],this.colorClasses=["bg-cyan-500","bg-orange-500","bg-pink-500","bg-purple-500","bg-blue-500"],this.totalSold=0,this.totalTarget=2500,this.totalPercentage=0,this.subscription=this.layoutService.configUpdate$.subscribe(S=>{this.config=S,this.chartInit()})}ngOnInit(){this.productService.getAllProducts().subscribe(t=>{this.products=t,this.outOfStock=t.filter(o=>0==o.quantity)}),this.categoryService.getAllCategories().subscribe(t=>this.categories=t),this.brandService.getAllBrands().subscribe(t=>this.brands=t),this.orderService.getAllOrders().subscribe(t=>{this.orders=t,this.loadTopProducts()}),this.clientService.getAllClients().subscribe(t=>this.clients=t),this.cols=[{header:"Name",field:"title"},{header:"Category",field:"category"},{header:"Brand",field:"brand"},{header:"Price",field:"price"}],this.chartInit(),this.initChart()}loadTopProducts(){let t=new Map;this.orders.forEach(i=>{i.items.forEach(r=>{t.has(r.equipment.title)?t.get(r.equipment.title).quantity+=r.quantity:t.set(r.equipment.title,{...r})})});let o=Array.from(t.values());this.topProducts=o.sort((i,r)=>r.quantity-i.quantity).slice(0,5),this.totalSold=this.topProducts.reduce((i,r)=>i+r.quantity,0),this.totalTarget=o.reduce((i,r)=>i+r.quantity,0),this.totalPercentage=this.totalTarget?Math.round(this.totalSold/this.totalTarget*100):0}initChart(){const t=getComputedStyle(document.body).getPropertyValue("--text-color"),o=getComputedStyle(document.body).getPropertyValue("--primary-color"),i=getComputedStyle(document.body).getPropertyValue("--surface-100");this.visitorChart={labels:["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sept","Oct","Nov","Dec"],datasets:[{data:[600,671,660,665,700,610,810,790,710,860,810,780],backgroundColor:o,fill:!0,barPercentage:.75,stepped:!0}]},this.visitorChartOptions={plugins:{legend:{display:!1}},responsive:!0,hover:{mode:"index"},scales:{y:{min:500,max:900,ticks:{color:t},grid:{color:i}},x:{ticks:{color:t},grid:{display:!1}}}}}chartInit(){const t=getComputedStyle(document.body).getPropertyValue("--text-color")||"rgba(0, 0, 0, 0.87)",o=getComputedStyle(document.body).getPropertyValue("--surface-300");this.items=[{label:"Options",items:[{label:"Add New",icon:"pi pi-fw pi-plus"},{label:"Search",icon:"pi pi-fw pi-search"}]}],this.chartData={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"New",data:[11,17,30,60,88,92],backgroundColor:"rgba(13, 202, 240, .2)",borderColor:"#0dcaf0",pointBackgroundColor:"#0dcaf0",pointBorderColor:"#0dcaf0",pointBorderWidth:0,pointStyle:"line",fill:!1,tension:.4},{label:"Completed",data:[11,19,39,59,69,71],backgroundColor:"rgba(253, 126, 20, .2)",borderColor:"#fd7e14",pointBackgroundColor:"#fd7e14",pointBorderColor:"#fd7e14",pointBorderWidth:0,pointStyle:"line",fill:!1,tension:.4},{label:"Canceled",data:[11,17,21,30,47,83],backgroundColor:"rgba(111, 66, 193, .2)",borderColor:"#6f42c1",pointBackgroundColor:"#6f42c1",pointBorderColor:"#6f42c1",pointBorderWidth:0,pointStyle:"line",fill:!0,tension:.4}]},this.chartOptions={plugins:{legend:{fill:!0,labels:{color:t}}},scales:{y:{max:100,min:0,grid:{color:o},ticks:{color:t}},x:{grid:{display:!0,color:o},ticks:{color:t,beginAtZero:!0}}}}}onEmojiClick(t,o){t&&(t.value+=o,t.focus())}onGlobalFilter(t,o){t.filterGlobal(o.target.value,"contains")}static{this.\u0275fac=function(o){return new(o||n)(e.Y36(f.M),e.Y36(y.P),e.Y36(Z.sK),e.Y36(v.H),e.Y36(d.c),e.Y36(u.p),e.Y36(l.y))}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(o,i){if(1&o&&e.Gf(I,5),2&o){let r;e.iGM(r=e.CRH())&&(i.chatContainerViewChild=r.first)}},decls:99,vars:26,consts:[["menu",""],["dt",""],[1,"grid"],[1,"col-12","md:col-6","lg:col-4"],[1,"p-3","text-white","h-6rem","border-round","m-0","bg-center","bg-cover","bg-no-repeat","bg-cyan-600",2,"background-image","url('assets/layout/images/dashboard/effect-1.svg')"],[1,"font-bold","w-full","mb-3"],[1,"text-white","text-2xl","font-bold","w-full","flex","align-items-center","py-1"],[1,"pi","pi-arrow-up","ml-2","font-bold"],[1,"p-3","text-white","h-6rem","border-round","m-0","bg-center","bg-cover","bg-no-repeat","bg-orange-400",2,"background-image","url('assets/layout/images/dashboard/effect-2.svg')"],[1,"p-3","text-white","h-6rem","border-round","m-0","bg-center","bg-cover","bg-no-repeat","bg-purple-400",2,"background-image","url('assets/layout/images/dashboard/effect-3.svg')"],[1,"col-12","lg:col-6"],[1,"card","h-full"],["type","line","id","nasdaq-chart",3,"data","options","responsive"],[1,"card"],[1,"flex","align-items-center","justify-content-between","mb-4"],[1,"ml-auto"],["pButton","","pRipple","","icon","pi pi-ellipsis-v",1,"p-button-text","p-button-plain","p-button-rounded",3,"click"],[3,"popup","model"],[1,"border-1","surface-border","p-3","mb-4"],[1,"font-medium","text-3xl","text-color"],[1,"text-color-secondary"],[1,"m-0","p-0","list-none","mt-3","flex"],["class","h-1rem flex-1",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"mt-4","p-0","mx-0"],["class","flex align-items-center py-3",4,"ngFor","ngForOf"],[1,"col-12","lg:col-4","p-3"],[1,"flex","align-items-center","justify-content-between"],[1,"font-bold","text-3xl","text-color"],[1,"mt-2","mb-0","text-2xl","text-color-secondary"],["src","assets/layout/images/dashboard/stats-illustration-1.svg"],["src","assets/layout/images/dashboard/stats-illustration-2.svg"],["src","assets/layout/images/dashboard/stats-illustration-3.svg"],[1,"col-12"],[1,"flex","flex-column","md:flex-row","md:align-items-start","md:justify-content-between","mb-3"],[1,"text-900","text-xl","font-semibold","mb-3","md:mb-0"],[1,"inline-flex","align-items-center"],[1,"p-input-icon-left","flex-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",1,"w-full",2,"border-radius","2rem",3,"input"],["pButton","","pRipple","","icon","pi pi-upload",1,"p-button-rounded","mx-3",3,"click"],["responsiveLayout","scroll",3,"value","columns","paginator","rows","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],[1,"h-1rem","flex-1",3,"ngClass","ngStyle"],[1,"flex","align-items-center","py-3"],[1,"border-round","mr-3","w-1rem","h-1rem",3,"ngClass"],[1,"text-xl","font-medium","text-color"],[1,"text-xl","font-medium","text-color-secondary","ml-auto"],["pSortableColumn","name",1,"white-space-nowrap",2,"min-width","12rem"],["field","name"],["pSortableColumn","category",1,"white-space-nowrap",2,"min-width","10rem"],["field","category"],["pSortableColumn","brand",1,"white-space-nowrap",2,"min-width","10rem"],["field","brand"],["pSortableColumn","price",1,"white-space-nowrap",2,"min-width","10rem"],["field","price"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-search",1,"p-button-outlined","p-button-rounded"]],template:function(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"div",6),e._uU(7),e._UZ(8,"i",7),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",8)(11,"div",5)(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"div",6),e._uU(15),e._UZ(16,"i",7),e.qZA()()(),e.TgZ(17,"div",3)(18,"div",9)(19,"div",5)(20,"span"),e._uU(21),e.qZA()(),e.TgZ(22,"div",6),e._uU(23),e._UZ(24,"i",7),e.qZA()()(),e.TgZ(25,"div",10)(26,"div",11)(27,"h5"),e._uU(28,"Weekly Overview"),e.qZA(),e._UZ(29,"p-chart",12),e.qZA()(),e.TgZ(30,"div",10)(31,"div",13)(32,"div",14)(33,"h5"),e._uU(34,"Sales"),e.qZA(),e.TgZ(35,"div",15)(36,"button",16),e.NdJ("click",function(p){e.CHM(r);const b=e.MAs(38);return e.KtG(b.toggle(p))}),e.qZA(),e._UZ(37,"p-menu",17,0),e.qZA()(),e.TgZ(39,"div",18)(40,"span",19),e._uU(41),e.TgZ(42,"span",20),e._uU(43),e.qZA()(),e.TgZ(44,"ul",21),e.YNc(45,D,1,4,"li",22),e.qZA()(),e.TgZ(46,"div",13)(47,"div",14)(48,"h5"),e._uU(49,"Top 5 Products"),e.qZA()(),e.TgZ(50,"div",18)(51,"span",19),e._uU(52,"Top Selling Products"),e.qZA()(),e.TgZ(53,"ul",23),e.YNc(54,E,6,3,"li",24),e.qZA()()()(),e.TgZ(55,"div",25)(56,"div",13)(57,"div",26)(58,"div")(59,"span",27),e._uU(60),e.qZA(),e.TgZ(61,"p",28),e._uU(62),e.qZA()(),e.TgZ(63,"div"),e._UZ(64,"img",29),e.qZA()()()(),e.TgZ(65,"div",25)(66,"div",13)(67,"div",26)(68,"div")(69,"span",27),e._uU(70),e.qZA(),e.TgZ(71,"p",28),e._uU(72),e.qZA()(),e.TgZ(73,"div"),e._UZ(74,"img",30),e.qZA()()()(),e.TgZ(75,"div",25)(76,"div",13)(77,"div",26)(78,"div")(79,"span",27),e._uU(80,"-"),e.qZA(),e.TgZ(81,"p",28),e._uU(82,"Payments Processed"),e.qZA()(),e.TgZ(83,"div"),e._UZ(84,"img",31),e.qZA()()()(),e.TgZ(85,"div",32)(86,"div",13)(87,"div",33)(88,"div",34),e._uU(89,"Products out of stock"),e.qZA(),e.TgZ(90,"div",35)(91,"span",36),e._UZ(92,"i",37),e.TgZ(93,"input",38),e.NdJ("input",function(p){e.CHM(r);const b=e.MAs(96);return e.KtG(i.onGlobalFilter(b,p))}),e.qZA()(),e.TgZ(94,"button",39),e.NdJ("click",function(){e.CHM(r);const p=e.MAs(96);return e.KtG(p.exportCSV())}),e.qZA()()(),e.TgZ(95,"p-table",40,1),e.YNc(97,L,14,0,"ng-template",41)(98,q,18,7,"ng-template",42),e.qZA()()()()}2&o&&(e.xp6(5),e.Oqu(i.translate.instant("equipments")),e.xp6(2),e.hij("",i.products.length," "),e.xp6(6),e.Oqu(i.translate.instant("brands")),e.xp6(2),e.hij("",i.brands.length," "),e.xp6(6),e.Oqu(i.translate.instant("categories")),e.xp6(2),e.hij("",i.categories.length," "),e.xp6(6),e.Q6J("data",i.chartData)("options",i.chartOptions)("responsive",!0),e.xp6(8),e.Q6J("popup",!0)("model",i.items),e.xp6(4),e.hij("",i.totalPercentage,"% "),e.xp6(2),e.AsE("(",i.totalSold,"/",i.totalTarget,")"),e.xp6(2),e.Q6J("ngForOf",i.topProducts),e.xp6(9),e.Q6J("ngForOf",i.topProducts),e.xp6(6),e.Oqu(i.clients.length),e.xp6(2),e.Oqu(i.translate.instant("clients")),e.xp6(8),e.Oqu(i.orders.length),e.xp6(2),e.Oqu(i.translate.instant("orders")),e.xp6(23),e.Q6J("value",i.outOfStock)("columns",i.cols)("paginator",!0)("rows",4)("globalFilterFields",e.DdM(25,k)))},dependencies:[c.mk,c.sg,c.PC,O.Hq,C.jx,T.H,w.v2,P.C,_.iA,_.lQ,_.fz,A.o,c.H9],styles:[".locked-feature-card[_ngcontent-%COMP%]{background-color:#f2f2f2;border:1px solid #ccc;border-radius:5px;box-shadow:none;padding:1rem;position:relative;pointer-events:none}.locked-icon[_ngcontent-%COMP%]{font-size:3rem;color:#999;display:block;margin:0 auto .5rem}.locked-title[_ngcontent-%COMP%]{font-size:1.25rem;text-align:center;margin:0;color:#999}"]})}}return n})(),H=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.oAB({type:n})}static{this.\u0275inj=e.cJS({imports:[g.Bz.forChild([{path:"",component:M}]),g.Bz]})}}return n})();var B=a(7778);let W=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[c.ez,T.T,C.m8,B.q,C.m8]})}return n})(),Y=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.oAB({type:n})}static{this.\u0275inj=e.cJS({imports:[c.ez,H,O.hJ,T.T,w.$9,P.S,_.U$,A.j,W,Z.aw]})}}return n})()},5836:(x,m,a)=>{a.d(m,{y:()=>v});var c=a(9862),g=a(9947),f=a(9212);let v=(()=>{class d{constructor(l){this.http=l,this.apiHost=g.N.hostUrl,this.apiUrl=`${this.apiHost}clients`,this.httpOptions={headers:new c.WM({"Content-Type":"application/json"})}}getAllClients(l){return this.http.get(null==l?this.apiUrl:`${this.apiUrl}?type=${l}`)}getClientById(l){return this.http.get(`${this.apiUrl}/${l}`)}addClient(l){return this.http.post(this.apiUrl,l,this.httpOptions)}updateClient(l,e){return this.http.put(`${this.apiUrl}/${l}`,e,this.httpOptions)}deleteClient(l){return this.http.delete(`${this.apiUrl}/${l}`)}static{this.\u0275fac=function(e){return new(e||d)(f.LFG(c.eN))}}static{this.\u0275prov=f.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},5993:(x,m,a)=>{a.d(m,{M:()=>d});var c=a(9862),g=a(8504),f=a(9947),v=a(9212);let d=(()=>{class u{constructor(e){this.http=e,this.apiHost=f.N.hostUrl,this.apiUrl=`${this.apiHost}equipments`,this.httpOptions={headers:new c.WM({"Content-Type":"application/json"})}}getAllProducts(){return this.http.get(this.apiUrl)}getProductsByBrand(e){return this.http.get(`${this.apiUrl}/find?brand=${e}`)}getProductById(e){return this.http.get(`${this.apiUrl}/${e}`)}addProduct(e){return this.http.post(this.apiUrl,e,this.httpOptions)}updateProduct(e,y){return this.http.put(`${this.apiUrl}/${e}`,y,this.httpOptions)}deleteProduct(e){return this.http.delete(`${this.apiUrl}/${e}`)}handleError(e){return console.error("An error occurred:",e.message),(0,g._)("Something went wrong. Please try again later.")}static{this.\u0275fac=function(y){return new(y||u)(v.LFG(c.eN))}}static{this.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);