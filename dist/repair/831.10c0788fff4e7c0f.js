"use strict";(self.webpackChunkavalon_ng=self.webpackChunkavalon_ng||[]).push([[831],{2831:(U,c,a)=>{a.r(c),a.d(c,{ClientModule:()=>E});var g=a(6814),r=a(132),u=a(8180),v=a(9397),f=a(5836),y=a(2333),d=a(4992),e=a(9212),h=a(3530),C=a(537),D=a(4830),m=a(6925);const T=()=>({width:"70%",padding:"0px"}),I=()=>({"background-color":"#f9f9f9"});let S=(()=>{class s{constructor(t,l,i){this.clientService=t,this.router=l,this.auth=i,this.loading=!1,this.dataRows=[],this.showDetail=!1,this.rowDetail={},this.user=null,this.clientMapping={id:n=>n.id,fullname:n=>n.fullname,phone:n=>n.phone,email:n=>n.email,type:n=>n.type}}ngOnInit(){this.user=this.auth.getSignedUser(),this.clientService.getAllClients().pipe((0,u.q)(1),(0,v.b)(t=>{this.dataRows=t})).subscribe()}canAddItem(){return(0,d.F)(this.user,"create:clients")}canViewItem(){return(0,d.F)(this.user,"view:clients")}canDeleteItem(){return(0,d.F)(this.user,"delete:clients")}canUpdateItem(){return(0,d.F)(this.user,"update:clients")}onEvent(t,l){"Add"==t?this.router.navigate(["/clients/add"]):t.eventType&&"edit"===t.eventType?(delete t.eventType,this.router.navigate(["/clients/edit",{formData:JSON.stringify(t)}])):t.eventType&&"delete"===t.eventType?(delete t.eventType,this.delete(t)):t.eventType&&"show"===t.eventType&&(delete t.eventType,this.showDetail=!0,this.rowDetail=t)}delete(t){this.clientService.deleteClient(t.id).subscribe({next:l=>{let i=this.dataRows.findIndex(n=>n.id==t.id);if(-1!==i){let n=this.dataRows.splice(i,1);this.dataRows=this.dataRows.filter(o=>o.id!==n[0].id)}},error:l=>{console.error("Error adding client:",l)}})}static{this.\u0275fac=function(l){return new(l||s)(e.Y36(f.y),e.Y36(r.F0),e.Y36(y.e))}}static{this.\u0275cmp=e.Xpm({type:s,selectors:[["app-client"]],decls:8,vars:24,consts:[[3,"visibleChange","modal","header","draggable","visible","contentStyle","styleClass","closeOnEscape","dismissableMask","resizable"],[1,"col-12"],["name","client",1,"detail",3,"dataRow"],[1,"grid"],[1,"card"],["name","client",3,"event","paginate","dataRows","haveDetails","canAddItem","deletable","editable","mapping"]],template:function(l,i){1&l&&(e.TgZ(0,"p-dialog",0),e.ALo(1,"translate"),e.Uc_("visibleChange",function(o){return e.nJJ(i.showDetail,o)||(i.showDetail=o),o}),e.TgZ(2,"div",1),e._UZ(3,"generator-detail",2),e.qZA()(),e.TgZ(4,"div",3)(5,"div",1)(6,"div",4)(7,"generator-table",5),e.NdJ("event",function(o){return i.onEvent(o)}),e.qZA()()()()),2&l&&(e.Akn(e.DdM(22,T)),e.Q6J("modal",!0)("header",e.lcZ(1,20,"client.detail"))("draggable",!0),e.E3D("visible",i.showDetail),e.Q6J("contentStyle",e.DdM(23,I))("styleClass","custom-dialog")("closeOnEscape",!0)("dismissableMask",!0)("resizable",!0),e.xp6(3),e.Q6J("dataRow",i.rowDetail),e.xp6(4),e.Q6J("paginate",!1)("dataRows",i.dataRows)("haveDetails",!1)("canAddItem",i.canAddItem())("deletable",i.canDeleteItem())("editable",i.canUpdateItem())("haveDetails",i.canUpdateItem())("mapping",i.clientMapping))},dependencies:[h.V,C.j,D.u,m.X$],encapsulation:2})}}return s})();var p=a(5475);const b=[{path:"",component:S},{path:"add",data:{breadcrumb:"client.add"},component:p.S},{path:"edit",data:{breadcrumb:"client.edit"},component:p.S}];let A=(()=>{class s{static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275mod=e.oAB({type:s})}static{this.\u0275inj=e.cJS({imports:[r.Bz.forChild(b),r.Bz]})}}return s})();var R=a(4956),J=a(4862),w=a(4104),M=a(7830),F=a(5118),Z=a(6804);let E=(()=>{class s{static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275mod=e.oAB({type:s})}static{this.\u0275inj=e.cJS({imports:[g.ez,A,h.S,R.S,J.X,w.EV,M.d,m.aw,F.DL,Z.KZ]})}}return s})()}}]);